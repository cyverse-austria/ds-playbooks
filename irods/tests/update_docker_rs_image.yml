---
- name: test build image
  hosts: rs
  run_once: true
  gather_facts: false
  tasks:
    - delegate_to: localhost
      delegate_facts: true
      block:
        - name: test create command scripts staging directory
          stat:
            path: /tmp/cmd
          register: response
          failed_when: not (response.stat.exists and response.stat.isdir)

        - name: test add amqptopicsend.py
          stat:
            path: /tmp/cmd/amqptopicsend.py
          register: response
          failed_when: not response.stat.exists

        - name: test add calliope-ingest
          stat:
            path: /tmp/cmd/calliope-ingest
          register: response
          failed_when: not response.stat.exists

        - name: test add de-archive-data
          debug:
            msg: TODO implement

        - name: test add de-create-collection
          debug:
            msg: TODO implement

        - name: test add delete-scheduled-rule
          debug:
            msg: TODO implement

        - name: test add generateuuid
          debug:
            msg: TODO implement

        - name: test add rm-trash
          debug:
            msg: TODO implement

        - name: test add set-uuid
          debug:
            msg: TODO implement

        - name: test add sparcd-ingest
          debug:
            msg: TODO implement

        - debug:
            msg: TODO import cyverse.irods-cfg

        - name: test stage dynamic rule bases
          debug:
            msg: TODO implement

        - name: test stage static rule bases
          debug:
            msg: TODO implement

        - name: test copy .dockerignore
          debug:
            msg: TODO implement

        - name: test copy resource server docker scripts
          debug:
            msg: TODO implement

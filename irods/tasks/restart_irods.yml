---
- when: inventory_hostname in groups['irods_resource'] | difference(groups['irods_catalog'])
  include_tasks: stop_irods.yml

- name: restart ICAT enabled servers
  when: inventory_hostname in groups['irods_catalog']
  irods_ctl:
    state: restarted

- name: start resource servers
  when: inventory_hostname in groups['irods_resource'] | difference(groups['irods_catalog'])
  irods_ctl:

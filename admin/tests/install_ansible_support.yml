---
- name: test install dmidecode required by ansible gather_facts
  hosts: all:!unmanaged_systems:!localhost
  become: true
  tasks:
    - name: test install dmidcode support for CentOS
      when: ansible_distribution == 'CentOS'
      include_tasks: tasks/test_pkg_installed.yml
      vars:
        pkg: dmidecode

    - name: test install dmicode support for distributions other than CentOS
      when: ansible_distribution != 'CentOS'
      command: dpkg --status dmidecode
      changed_when: false


- name: test install required packages for ansible
  hosts: all:!unmanaged_systems:!localhost
  become: true
  gather_facts: false
  tasks:
    - name: test install EPEL repo
      when: ansible_distribution == 'CentOS'
      include_tasks: tasks/test_pkg_installed.yml
      vars:
        pkg: epel-release

    - name: test jq installed
      include_tasks: tasks/test_pkg_installed.yml
      vars:
        pkg: jq

    - name: test Python libselinux package installed
      debug:
        msg: TODO implement

    - name: test python-dns installed
      debug:
        msg: TODO implement

    - name: test Python PIP package installed
      debug:
        msg: TODO implement

    - name: test python-requests installed
      debug:
        msg: TODO implement

    - name: test python-virtualenv installed
      debug:
        msg: TODO implement
